---
title: 35_封装资源消耗
---


- 资源消耗整理

P1任务不传输走不会接到下一个任务,占用磁盘 cached=32\*11+64 unseal=32
P1任务传输完后会在本地保留 unseal=32
我们认为P1任务之后的时间内,保留在本地的数据一般会有1-2个
所以一个p1-worker单线程最大占用是 当前任务+2个之前任务的unseal
大概共需要 448+64=512G
如果后面的worker不给力,则本地会保留更多的unseal数据,每保留一个增加32G

p1-worker使用的内存还是看sector数目,一个sector是64G

P2任务不完成,即没有生成 p_aux 和 t_aux 之前是不会接收到超过1个待进行的任务的
占用磁盘 cached=32\*11+64 + 4.6\*8+74M , sealed 32G
P2任务传输完后会在本地保留cache和sealed
我们认为P2任务之后的时间内,保留在本地的数据一般只有3-4个,主要是看本地已经完成的P2什么时候被C2完成
所以一个p2c2-worker单线程最大占用的是 当前任务+之前4个任务
大概共需要 485G\*5=2425G
如果C2或者提交卡住了,则本地会保留更多的cache数据,每多一个增加485G

p2-基本不会使用cpu,使用的内存也比较少,一般在10G左右
p2-会占用较少的显存0.5G,而且p2需要大量的磁盘

c2的CPU使用看设置,但C1是会使用到cpu的.使用的内存看来一个sector是是不会超过128G的
c2-会使用较多的显存 8.8G
但是使用了小马的优化后,单个 C2是需要220G内存的